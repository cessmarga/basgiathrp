<!DOCTYPE html>
<html>
<head><title>Admin Panel</title>
      <style>
        table, th, td {
            border: 1px solid #444;
            border-collapse: collapse;
            padding: 8px;
        }
        th { background-color: #eee; }
    </style>
</head>
<body>
      <div style="text-align: right;">
        <form action="{{ url_for('admin_logout') }}" method="GET" style="display: inline;">
          <button type="submit" class="btn btn-secondary">ðŸšª Logout</button>
        </form>
      </div>
      
      <form action="{{ url_for('next_year') }}" method="POST" onsubmit="return confirm('Are you ABSOLUTELY sure we\'re moving the timeline to the NEXT YEAR?\nLIKE VERY SURE?');">
        <button type="submit" class="btn btn-danger btn-sm">ðŸ“… Enter the Next Year</button>
      </form>
      
      <h2>Welcome, Admin</h2>
      
      <form action="{{ url_for('add_user') }}" method="GET" style="margin-bottom: 10px;">
        <button type="submit" class="btn btn-success">âž• Add Users</button>
      </form>
    
      <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Group</th>
                <th>Grad</th>
                <th>Leader</th>
                <th>Pre-War</th>
                <th>Frontlines</th>
                <th>Disability</th>
                <th>Age</th>
                <th>Magic</th>
                <th>Fighter</th>
                <th>Attack Modifier</th>
                <th>Attack %</th>
                <th>Defend Modifier</th>
                <th>Defend %</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user['username'] }}</td>
                <td>{{ user['member_group'] }}</td>
                <td>{{ 'Yes' if user['graduate'] == 'yes' else 'No' }}</td>
                <td>{{ 'Yes' if user['leadership'] == 'yes' else 'No' }}</td>
                <td>{{ user['pre_war_status'] }}</td>
                <td>{{ 'Yes' if user['frontlines'] == 'yes' else 'No' }}</td> 
                <td>{{ 'Yes' if user['disability'] == 'yes' else 'No' }}</td>
                <td>{{ user['age'] }}</td>
                <td>{{ user['magic_type'] }}</td>
                <td>{{ user['fighter_type'] }}</td>
                <td>{{ user['attack_success'] }}%</td>
                <td>{{ user['attack_odds'] }}%</td>
                <td>{{ user['defend_success'] }}%</td>
                <td>{{ user['defend_odds'] }}%</td>
                <td>
                  <form action="{{ url_for('reset_user', user_id=user['id']) }}" method="POST" onsubmit="return confirm('Are you sure you want to reset user to base stats?');">
                    <button type="submit" class="btn btn-danger btn-sm">Reset</button>
                  </form>
                  <form action="{{ url_for('delete_user', user_id=user['id']) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this user?');">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                  </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
      </table>
</body>
</html>
